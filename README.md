# tape_sorter

Консольное приложение на C++ для сортировки с эмуляцией устройства хранения данных типа лента.
Для эмуляции лент используются бинарные файлы, заполненные данными типа int32_t.

## Зависимости

- C++20
- CMake 3.30+
- Boost (program_options)
- GoogleTest (для тестов)

## Запуск программы

После сборки мы получаем 2 исполняемых файла:

- `tape_exec` — основной исполняемый файл программы
- `tape_tests` — файл с тестами

Программа запускается из терминала:

```bash
./tape_exec <input_tape> <output_tape> [-d | --debug]
```
Здесь:

- `input_tape` — имя входного файла ленты
- `output_tape` — имя выходного файла
- `-d`, `--debug` — флаг для вывода отладочной информации

Инструкцию по использованию можно посмотреть с помощью флага `-h`, `--help`.

Для настройки задержек по записи/чтению элемента с ленты и сдвига ленты на одну
позицию необходимо создать конфигурационный файл `config.conf` в той же директории,
где находится `tape_exec`, такого формата:
```
read_delay=15
write_delay=15
move_delay=15
```

Где все значения указаны в миллисекундах. В случае отсутствия какого-либо параметра
программа берёт значение по умолчанию: 10 миллисекунд.

## Алгоритм сортировки

В программе реализуется алгоритм естественного двухпутевого слияния. Алгоритм
состоит из следующих этапов:

1. Разделение на серии (`splitRuns`)
   - Последовательность чисел читается с входной ленты и разбивается на упорядоченные серии.
   - Серии записываются на две временные ленты (`tmp/tape1` и `tmp/tape2`), чередуя их при каждом 
нарушении порядка.

2. Слияние (`mergeRuns`)
   - Считываем данные с временных лент, выбирая наименьший элемент из двух и записывая его на выходную ленту.

После полного слияния процесс повторяется до тех пор, пока все данные не окажутся на одной ленте.

### Преимущества алгоритма

- Сортировка производится последовательным чтением и записью, минимизируя использование оперативной памяти.
- Естественное разделение серий улучшает производительность, так как уже отсортированные фрагменты не 
разбиваются дополнительно.
- Использование временных лент позволяет сортировать данные, превышающие объем доступной оперативной памяти.